<div class="card my-2" >
  <div class="card-header">
    Item {{forloop.counter}}
  </div>
  <div class="card-body">
    <h5 class="card-title" style ="font-family: courier; font-weight: bold;">{{item.question}}</h5>
    <!-- <p class="card-text">With supporting text below as a natural lead-in to additional content.</p> -->
    <!-- <a href="#" class="btn btn-primary">Go somewhere</a> -->

    {%if item.image%}
    <div class="container">
      <img src="{{item.image.url}}" class="img" alt="Responsive image" height="300px">
    </div>
    {% endif%}
    <div class="container mb-4" style ="font-family: courier; font-weight: normal;">
      {%for choice in item.choices.all %}
        {%if choice.correct%}
          <span class="correct_{{item.pk}}">
          {%if forloop.counter == 1%}A. {%endif%}
          {%if forloop.counter == 2%}B. {%endif%}
          {%if forloop.counter == 3%}C. {%endif%}
          {%if forloop.counter == 4%}D. {%endif%}


          {{choice.content | safe}}    </span>
          <svg class="bi bi-check" width="2em" height="2em" viewBox="0 0 16 16" fill="green" xmlns="http://www.w3.org/2000/svg" style="opacity: 0;" id="check_{{item.pk}}">
            <path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"/>
          </svg>
          {%else%}
          <span class="wrong">
          {%if forloop.counter == 1%}A. {%endif%}
          {%if forloop.counter == 2%}B. {%endif%}
          {%if forloop.counter == 3%}C. {%endif%}
          {%if forloop.counter == 4%}D. {%endif%}
          {{choice.content | safe}}</span>
          {%endif%}

        {%if choice.image %}
          <div class="container">
            <img src="{{choice.image.url}}" class="img" alt="Responsive image" height="300px">
          </div>
        {% endif%}
        <br>
        {%endfor%}
    </div>

  <div class="collapse" id="explanation_{{item.pk}}">
    <div class="card card-body">
      {%if item.explanation%}
      <p>Explanation : {{item.explanation | safe}}</p>
      {%else%}
      <p>No answer explanation available for this question.</p>
      {%endif%}
    </div>

    </div>

  </div>

  <script type="text/javascript">
    $('.wrong').click(function() {
      $(this).fadeTo('slow',0.3);
    })

    $('.correct_{{item.pk}}').click(function(){
        $('#explanation_{{item.pk}}').collapse('show');
        $('#check_{{item.pk}}').fadeTo('slow', 1);
    })

  </script>

</div>
